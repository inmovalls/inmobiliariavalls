(()=>{"use strict";const e="https://backend-inmovalls.herokuapp.com/",n={inmuebles:e+"inmuebles/",operaciones:e+"operacions/",tipos:e+"tipo-inmuebles/",subtipos:e+"subtipo-inmuebles/",caracteristicas:e+"caracteristicas/",zonas:e+"zonas/",departamentos:e+"departamentos/"},t=async e=>{if("count"===e){const t=`${n.inmuebles}${e}`;try{const e=await fetch(t);return await e.json()}catch(e){console.error("Error al conseguir la API de inmuebles",e.message)}}const t=e?`${n.inmuebles}${e}`:n.inmuebles;try{const e=await fetch(t);return await e.json()}catch(e){console.error("Error al conseguir la API de inmuebles",e.message)}},a=async e=>{const n=await t(e),{caracteristicas:a}=n;let i="";for(let e=0;e<a.length;e++)i+=a[e].nombre_caracteristica+" ";return`\n        <a href="#/inmueble/${n.id}" id="container-${n.id}" class="StateItem-container">\n            <h3>${n.titulo}</h3>\n            <figure class="StateItem-image">\n                <img src="${n.imagen_url_1}" alt="Inmueble">\n            </figure>\n            <div class="StateItem-properties">\n                <p>\n                    <span>${n.tipo_inmueble.nombre_tipo_inmueble}</span>\n                    para <span>${n.operacion.tipo_operacion}</span>\n                </p>\n                <p>\n                    <span>${n.precio}</span>\n                    &nbsp;\n                    <span>${n.superficie}</span>\n                </p>\n                <span>${n.habitaciones} habitaciones</span>\n                <span>${n.zona.nombre_zona}</span>\n            </div>\n        </a>\n    `},i=async()=>`\n        <h1>Bienvenidos a Valls Inmobiliaria</h1>\n        <div class="Home-filter-container">\n            <button type="button" class="show-filter-button" id="show-filter-button">Filtros</button>\n            <div class="Home-filter" id="Home-filter-menu">\n                ${await(async()=>{const e=(e,n)=>{let t="";for(let a=0;a<e.length;a++)t+=`\n                <label class="Filter-${n} Filter-button-container"><input type="checkbox" class="Filter-button Filter-button-${n}" id="${n}-${a}"><span class="checkmark"><div class="check-checked"></div></span>${e[a]}</label>\n            `;return t},n=await t();let a=[],i=[],s=[],o=[],r=[],l=[],c=[],m=[],d=[],u=[];for(let e=0;e<n.length;e++)a[e]=n[e].operacion.tipo_operacion,i[e]=n[e].precio,s[e]=n[e].superficie,o[e]=n[e].habitaciones,r[e]=n[e].banos,l[e]=n[e].tipo_inmueble.nombre_tipo_inmueble,c[e]=n[e].subtipo_inmueble.nombre_subtipo_inmueble,m[e]=n[e].zona.nombre_zona,d[e]=n[e].caracteristicas;for(let e=0;e<d.length;e++)for(let n=0;n<d[e].length;n++)u.push(d[e][n].nombre_caracteristica);a=new Set(a.sort()),i=new Set(i.sort()),s=new Set(s.sort()),o=new Set(o.sort()),r=new Set(r.sort()),l=new Set(l.sort()),c=new Set(c.sort()),m=new Set(m.sort()),u=new Set(u.sort()),a=Array.from(a),i=Array.from(i),s=Array.from(s),o=Array.from(o),r=Array.from(r),l=Array.from(l),c=Array.from(c),m=Array.from(m),u=Array.from(u);let p=[];for(let e=0;e<i.length;e++)p[e]=parseInt(i[e].replace(/\D/g,""));p=p.sort((function(e,n){return e-n}));let b=[];for(let e=0;e<s.length;e++)b[e]=parseInt(s[e].replace(/\D/g,"").replace(/2$/g,""));b=b.sort((function(e,n){return e-n}));let g=[];for(let e=0;e<o.length;e++)g[e]=parseInt(o[e].replace(/\D/g,""));g=g.sort((function(e,n){return e-n}));let f=[];for(let e=0;e<r.length;e++)f[e]=parseInt(r[e].replace(/\D/g,""));return f=f.sort((function(e,n){return e-n})),`\n        <div class="Filter-container">\n            <span class="Filter-container-title">Operación: </span>\n            ${e(a,"operation")}<br>\n        </div>\n        <div class="Filter-container">\n            <span class="Filter-container-title">Precio: </span>\n            ${e(i,"price")}<br>\n        </div>\n        <div class="Filter-container">\n            <span class="Filter-container-title">Superficie: </span>\n            ${e(s,"surface")}<br>\n        </div>\n        <div class="Filter-container">\n            <span class="Filter-container-title">Habitaciones: </span>\n            ${e(o,"room")}<br>\n        </div>\n        <div class="Filter-container">\n            <span class="Filter-container-title">Baños: </span>\n            ${e(r,"toilet")}<br>\n        </div>\n        <div class="Filter-container">\n            <span class="Filter-container-title">Tipo: </span>\n            ${e(l,"type")}<br>\n        </div>\n        <div class="Filter-container">\n            <span class="Filter-container-title">Subtipo: </span>\n            ${e(c,"subtype")}<br>\n        </div>\n        <div class="Filter-container">\n            <span class="Filter-container-title">Zona: </span>\n            ${e(m,"zone")}<br>\n        </div>\n    `})()}\n            </div>\n        </div>\n        <div class="Home-items">\n            ${await(async()=>{const e=await t("count"),n=await t();let i="";for(let t=0;t<e;t++)n[t].disponible&&(i+=`\n            ${await a(t+1)}\n            `);return i})()}\n        </div>\n    `,s=()=>'\n    <div class="Error404">\n        <h2>Hay un Error</h2>\n        <img src="https://i.imgur.com/YzUWeau.png">\n        <h3>No encontramos la página que busca</h3>\n    </div>\n    ',o=async e=>{const t=e?`${n.departamentos}${e}`:n.departamentos;try{const e=await fetch(t);return await e.json()}catch(e){console.error("Error al conseguir la API de departamentos",e.message)}},r=()=>location.hash.slice(1).toLocaleLowerCase().split("/")||"/",l=async()=>{let e="";switch(r()[1]){case"about":e=await o(1);break;case"administracion_fincas":e=await o(2);break;case"gestion_alquileres":e=await o(3);break;case"departamento_juridico":e=await o(4);break;case"correduria_seguros":e=await o(5);break;default:e=await o(6)}return e},c=async()=>{let e=await l();return e.telefono2||(e.telefono2=""),e.email2||(e.email2=""),`\n        <div class="Contact-container">\n            <h3>Contáctanos</h3><hr>\n            <div class="Contact-container-content">\n                <h4>${e.nombre_departamento}</h4>\n                <span>${e.telefono}</span>\n                <span>${e.telefono2}</span>\n                <a href='mailto:${e.email}'>${e.email}</a>\n                <a href='mailto:${e.email2}'>${e.email2}</a>\n            </div>\n        </div>\n    `},m=async()=>{const e=location.hash.slice(1).toLocaleLowerCase().split("/")[2],n=await t(e),a=[n.imagen_url_1,n.imagen_url_2,n.imagen_url_3,n.imagen_url_4,n.imagen_url_5,n.imagen_url_6,n.imagen_url_7,n.imagen_url_8,n.imagen_url_9,n.imagen_url_10,n.imagen_url_11,n.imagen_url_12,n.imagen_url_13,n.imagen_url_14,n.imagen_url_15,n.imagen_url_16,n.imagen_url_17,n.imagen_url_18,n.imagen_url_19,n.imagen_url_20];let i=[];for(let e=0;e<a.length;e++)a[e]&&i.push(a[e]);const{caracteristicas:s,definicion:o,fecha_publicacion:l,habitaciones:m,banos:d,localizacion:u,operacion:{tipo_operacion:p},precio:b,superficie:g,tipo_inmueble:{nombre_tipo_inmueble:f},subtipo_inmueble:{nombre_subtipo_inmueble:y},zona:{nombre_zona:v},titulo:h}=n;let _="";for(let e=0;e<s.length;e++){let{nombre_caracteristica:n}=s[e];e===s.length-1?_+=n:_+=n+"<br>"}const $=l.split("T")[0].split("-"),w=$[2],E=$[1],F=$[0];return`\n        <div class="State-page">\n            <h2>Título: ${h}</h2>\n            ${(e=>{let n="";for(let t=1;t<e.length;t++)n+=`\n            <img src="${e[t]}" alt="Foto Inmueble" class="State-carousel-image" id="image-${t+1}" style="display: none;">\n        `;return`\n        <div class="State-carousel" id="State-carousel">\n            <button type="button" id="button-previous" ><div class="inside-button-previous"></div></button>\n            <div class="carousel-pictures">\n                <img src="${e[0]}" alt="Foto Inmueble" class="State-carousel-image" id="image-1" style="display: inline;">\n                ${n}\n            </div>\n            <button type="button" id="button-next" ><div class="inside-button-next"></div></button>\n        </div>\n    `})(i)}\n            <div class="State-page-info" id="State-page-info-1">\n                <p>\n                    ${f}\n                    ${y}\n                    para ${p}\n                </p>\n                <p>\n                    ${v}<br>\n                </p>\n                <p>\n                    ${b}<br>\n                    ${g}\n                </p>\n                <p>\n                    ${m} Habitaciones y ${d} Baños\n                </p>\n                <p>Publicado ${w} ${E} ${F}</p>\n            </div>\n            <div class="State-page-info" id="State-page-info-3">\n                <p><b>Descripción:</b></p>\n                <p>${o}</p>\n            </div>\n            <div id="info2-contact">\n                <div class="State-page-info" id="State-page-info-2">\n                    <p><b>Características:</b></p>\n                    <p>${_}</p>\n                </div>\n                ${await c()}\n            </div>\n            ${await(async()=>`\n        <div id="map">\n            ${(await t(r()[2])).maps_url}\n        </div>\n    `)()}\n        </div>\n    `},d=async()=>{const e=await l();return`\n        <div class=Info-page>\n            <div alt="Foto de portada" class="Info-portrait" style="background-image: url(${e.url_imagen_fondo})"></div>\n            <h2 class="Info-title">${e.titulo}</h2>\n            <div class="Info-content">${e.descripcion}</div>\n            <div class="Info-image-contact">\n                <img src="${e.url_imagen_principal}" alt="Una imagen característica" class="Info-image">\n                ${await c()}\n            </div>\n        </div>\n    `},u={"/":i,"/home":i,"/inmueble":m,"/inmueble/:id":m,"/about":d,"/administracion_fincas":d,"/gestion_alquileres":d,"/departamento_juridico":d,"/correduria_seguros":d,"/contact":d},p=async()=>{const e=document.getElementById("header"),n=document.getElementById("main"),t=document.getElementById("footer");e.innerHTML=await'\n        <div class="Header-logo">\n            <a href="#/home">\n                <img src="https://i.imgur.com/wSITcOb.png" alt="Valls Logo">\n            </a>\n        </div>\n        <div class="Header-nav-container">\n            <nav class="Header-nav">\n                <div type="button" id="Header-nav-button"></div>\n                <a class="Header-nav-item" href="#/home">\n                    <span>Inicio</span>\n                </a>\n                <a class="Header-nav-item" href="#/about">\n                    <span>Sobre Nosotros</span>\n                </a>\n                <a class="Header-nav-item" href="#/administracion_fincas">\n                    <span>Administración de Fincas</span>\n                </a>\n                <a class="Header-nav-item" href="#/gestion_alquileres">\n                    <span>Gestión de Alquileres</span>\n                </a>\n                <a class="Header-nav-item" href="#/departamento_juridico">\n                    <span>Dept. Jurídico</span>\n                </a>\n                <a class="Header-nav-item" href="#/correduria_seguros">\n                    <span>Seguros</span>\n                </a>\n            </nav>\n        <div>\n    ';let a=r(),i=await(e=>{let n=e[1];switch(n){case"":case void 0:return"/";default:return`/${n}`}})(a),o=u[i]?u[i]:s;n.innerHTML=await o(),t.innerHTML=await'\n    <figure class="Footer-logo">\n        <img src="https://i.imgur.com/amubWlx.png" alt="Valls Logo">\n    </figure>\n    <div class="Footer-info">\n        <div class="Footer-info-container">\n            <h4>ADMINISTRACIONES VALLS</h4>\n            <p class="Footer-info">\n                C/BISBE PERELLÓ 3 BAJOS <br>\n                PALMA DE MALLORCA <br>\n                TEL 971 72 16 88 / 971 72 16 89 <br>\n                EMAIL inmobiliaria@administracionesvalls.com <br>\n            </p>\n        </div>\n        <div class="Footer-info-container">\n            <h4>HORARIO</h4>\n            <p class="Footer-info">\n                Lunes, Miercoles y Viernes <br>\n                De 8 a 15 Hs <br>\n                Martes y Jueves <br>\n                De 8 a 20 Hs <br>\n            </p>\n        </div>\n    </div>\n    '},b=()=>{if(document.getElementById("State-carousel")){const e=document.getElementsByClassName("State-carousel-image"),n=document.getElementById("button-previous"),t=document.getElementById("button-next"),a=n=>{e[n].style.display="inline"},i=n=>{e[n].style.display="none"},s=()=>{for(let n=0;n<e.length;n++)if("inline"===e[n].style.display)return n},o=()=>{let e=s();0!==e&&(i(e),a(e-1))},r=()=>{let n=s();n!==e.length-1&&(i(n),a(n+1))};n.addEventListener("click",o),t.addEventListener("click",r)}},g=async()=>{const e=await t(),n=document.getElementsByClassName("Filter-button"),a=document.getElementsByClassName("Filter-operation"),i=document.getElementsByClassName("Filter-button-operation"),s=document.getElementsByClassName("Filter-price"),o=document.getElementsByClassName("Filter-button-price"),r=document.getElementsByClassName("Filter-surface"),l=document.getElementsByClassName("Filter-button-surface"),c=document.getElementsByClassName("Filter-room"),m=document.getElementsByClassName("Filter-button-room"),d=document.getElementsByClassName("Filter-toilet"),u=document.getElementsByClassName("Filter-button-toilet"),p=document.getElementsByClassName("Filter-type"),b=document.getElementsByClassName("Filter-button-type"),g=document.getElementsByClassName("Filter-subtype"),f=document.getElementsByClassName("Filter-button-subtype"),y=document.getElementsByClassName("Filter-zone"),v=document.getElementsByClassName("Filter-button-zone"),h=(document.getElementsByClassName("Filter-characteristic"),document.getElementsByClassName("Filter-button-characteristic"),(e,n,t,a)=>{let i=!1;for(let e=0;e<a.length;e++)i+=a[e].checked;if(i){let e=!1;for(let i=0;i<a.length;i++)e+=a[i].checked&&t[i].textContent===n;if(e)return 1;if(!e)return 0}else if(!i)return 1}),_=async n=>{var t;8===h(e[n].id,e[n].operacion.tipo_operacion,a,i)+h(e[n].id,e[n].precio,s,o)+h(e[n].id,e[n].superficie,r,l)+h(e[n].id,e[n].habitaciones,c,m)+h(e[n].id,e[n].banos,d,u)+h(e[n].id,e[n].tipo_inmueble.nombre_tipo_inmueble,p,b)+h(e[n].id,e[n].subtipo_inmueble.nombre_subtipo_inmueble,g,f)+h(e[n].id,e[n].zona.nombre_zona,y,v)?(t=e[n].id,document.getElementById(`container-${t}`).style.display="flex"):(e=>{document.getElementById(`container-${e}`).style.display="none"})(e[n].id)},$=()=>{for(let n=0;n<e.length;n++)e[n].disponible&&_(n)};for(let e=0;e<n.length;e++)n[e].addEventListener("click",$)},f=()=>{if(document.getElementById("show-filter-button")){const e=document.getElementById("show-filter-button"),n=document.getElementById("Home-filter-menu"),t=()=>{"flex"===n.style.display?n.style.display="none":n.style.display="flex"};e.addEventListener("click",t)}},y=document.getElementById("main");new MutationObserver((function(e,n){for(const n of e)"childList"===n.type?(b(),f(),g()):n.type})).observe(y,{attributes:!0,childList:!0,subtree:!0});const v=()=>{const e=document.getElementById("Header-nav-button");let n=document.getElementsByClassName("Header-nav-item");e.addEventListener("click",(()=>{for(let e=0;e<n.length;e++)"inline"===n[e].style.display?n[e].style.display="none":n[e].style.display="inline"}))},h=document.getElementById("header");new MutationObserver((function(e,n){for(const n of e)"childList"===n.type?v():n.type})).observe(h,{attributes:!0,childList:!0,subtree:!0}),window.addEventListener("load",p),window.addEventListener("hashchange",p)})();