(()=>{"use strict";const e="https://inmovalls-admin.herokuapp.com/",n={inmuebles:e+"inmuebles/",operaciones:e+"operacions/",tipos:e+"tipo-inmuebles/",subtipos:e+"subtipo-inmuebles/",caracteristicas:e+"caracteristicas/",zonas:e+"zonas/",departamentos:e+"departamentos/"},t=async e=>{if("count"===e){const t=`${n.inmuebles}${e}`;try{const e=await fetch(t);return await e.json()}catch(e){console.error("Error al conseguir la API de inmuebles",e.message)}}const t=e?`${n.inmuebles}${e}`:n.inmuebles;try{const e=await fetch(t);return await e.json()}catch(e){console.error("Error al conseguir la API de inmuebles",e.message)}},a=async e=>{const n=await t(e),{caracteristicas:a}=n;let i="";for(let e=0;e<a.length;e++)i+=a[e].nombre_caracteristica+" ";const s=n.imagenes_url.match(/https?:\/\/[\w\-\.]+\.\w{2,6}\/?\S*/gi);return`\n        <a href="#/inmueble/${n.id}" id="container-${n.id}" class="StateItem-container">\n            <h3>${n.titulo}</h3>\n            <figure class="StateItem-image">\n                <img src="${s[0]}" alt="Inmueble">\n            </figure>\n            <div class="StateItem-properties">\n                <p>\n                    <span>${n.tipo_inmueble.nombre_tipo_inmueble}</span>\n                    para <span>${n.operacion.tipo_operacion}</span>\n                </p>\n                <p>\n                    <span>${n.precio.toLocaleString()} €</span>\n                    &nbsp;\n                    <span>${n.superficie.toLocaleString()} m²</span>\n                </p>\n                <span>${n.habitaciones} habitaciones</span>\n                <span>${n.zona.nombre_zona}, ${n.subzona.nombre_subzona}</span>\n                <span>Ref: ${n.referencia}</span>\n            </div>\n        </a>\n    `},i=async()=>`\n        <h1>Bienvenidos a Valls Inmobiliaria</h1>\n        <div class="Home-filter-container">\n            ${await(async()=>{const e=(e,n)=>{let t="";for(let a=0;a<e.length;a++)t+=`\n                <label class="Filter-${n} Filter-button-container"><input type="checkbox" class="Filter-button Filter-button-${n}" id="${n}-${a}"><span class="checkmark"><div class="check-checked"></div></span>${e[a]}</label>\n            `;return t},n=await t();let a=[],i=[],s=[],o=[],r=[],l=[],c=[],d=[],m=[],u=[];for(let e=0;e<n.length;e++)a[e]=n[e].operacion.tipo_operacion,i[e]=n[e].precio,s[e]=n[e].superficie,o[e]=n[e].habitaciones,r[e]=n[e].banos,l[e]=n[e].tipo_inmueble.nombre_tipo_inmueble,c[e]=n[e].subtipo_inmueble.nombre_subtipo_inmueble,d[e]=n[e].zona.nombre_zona,m[e]=n[e].caracteristicas;for(let e=0;e<m.length;e++)for(let n=0;n<m[e].length;n++)u.push(m[e][n].nombre_caracteristica);return a=new Set(a.sort()),i=new Set(i.sort()),s=new Set(s.sort()),o=new Set(o.sort()),r=new Set(r.sort()),l=new Set(l.sort()),c=new Set(c.sort()),d=new Set(d.sort()),u=new Set(u.sort()),a=Array.from(a),i=Array.from(i),s=Array.from(s),o=Array.from(o),r=Array.from(r),l=Array.from(l),c=Array.from(c),d=Array.from(d),u=Array.from(u),`\n        <div class="Filter-container" id="Filter-container-operacion">\n            <div id="Operacion-buttons-container">\n            <label class="Filter-operation Filter-button-container"><input type="checkbox" checked class="Filter-button Filter-button-operation" id="operation-1"><span class="checkmark"><div class="check-checked"></div></span>Comprar</label>\n            <label class="Filter-operation Filter-button-container"><input type="checkbox" class="Filter-button Filter-button-operation" id="operation-0"><span class="checkmark"><div class="check-checked"></div></span>Alquilar</label>\n            </div>\n        </div>\n        <button type="button" class="show-filter-button" id="show-filter-button">Filtros</button>\n        <div class="Home-filter" id="Home-filter-menu">\n            <div class="Filter-container">\n                <span class="Filter-container-title">Habitaciones: </span>\n                ${e(o,"room")}\n            </div>\n            <div class="Filter-container">\n                <span class="Filter-container-title">Baños: </span>\n                ${e(r,"toilet")}\n            </div>\n            <div class="Filter-container">\n                <span class="Filter-container-title">Tipo: </span>\n                ${e(l,"type")}\n            </div>\n            <div class="Filter-container">\n                <span class="Filter-container-title">Subtipo: </span>\n                ${e(c,"subtype")}\n            </div>\n            <div class="Filter-container">\n                <span class="Filter-container-title">Zona: </span>\n                ${e(d,"zone")}\n            </div>\n        </div>\n    `})()}\n        </div>\n        <div class="Home-items" id="Home-items">\n            ${await(async()=>{const e=await t("count"),n=await t();let i="";for(let t=0;t<e;t++)n[t].disponible&&(i+=`\n            ${await a(n[t].id)}\n            `);return i})()}\n        </div>\n    `,s=()=>'\n    <div class="Error404">\n        <h2>Hay un Error</h2>\n        <img src="https://i.imgur.com/YzUWeau.png">\n        <h3>No encontramos la página que busca</h3>\n    </div>\n    ',o=async e=>{const t=e?`${n.departamentos}${e}`:n.departamentos;try{const e=await fetch(t);return await e.json()}catch(e){console.error("Error al conseguir la API de departamentos",e.message)}},r=()=>location.hash.slice(1).toLocaleLowerCase().split("/")||"/",l=async()=>{const e=await o();let n="";switch(r()[1]){case"about":n=await o(e[0].id);break;case"administracion_fincas":n=await o(e[1].id);break;case"gestion_alquileres":n=await o(e[2].id);break;case"departamento_juridico":n=await o(e[3].id);break;case"correduria_seguros":n=await o(e[4].id);break;default:n=await o(e[5].id)}return n},c=async()=>{let e=await l();return e.telefono2||(e.telefono2=""),e.email2||(e.email2=""),`\n        <div class="Contact-container">\n            <h3>Contáctanos</h3><hr>\n            <div class="Contact-container-content">\n                <h4>${e.nombre_departamente}</h4>\n                <span>${e.telefono}</span>\n                <span>${e.telefono2}</span>\n                <a href='mailto:${e.email}'>${e.email}</a>\n                <a href='mailto:${e.email2}'>${e.email2}</a>\n            </div>\n        </div>\n    `},d=async()=>{const e=location.hash.slice(1).toLocaleLowerCase().split("/")[2],n=await t(e),a=n.imagenes_url.match(/https?:\/\/[\w\-\.]+\.\w{2,6}\/?\S*/gi),{referencia:i,caracteristicas:s,descripcion:o,fecha_publicacion:l,habitaciones:d,banos:m,operacion:{tipo_operacion:u},precio:p,superficie:b,tipo_inmueble:{nombre_tipo_inmueble:g},subtipo_inmueble:{nombre_subtipo_inmueble:y},zona:{nombre_zona:h},subzona:{nombre_subzona:f},titulo:v}=n;let $="";for(let e=0;e<s.length;e++){let{nombre_caracteristica:n}=s[e];e===s.length-1?$+=n:$+=n+"<br>"}return`\n        <div class="State-page">\n            <h2>${v}</h2>\n            ${(e=>{let n="";for(let t=1;t<e.length;t++)n+=`\n            <img src="${e[t]}" alt="Foto Inmueble" class="State-carousel-image" id="image-${t+1}" style="display: none;">\n        `;return`\n        <div class="State-carousel" id="State-carousel">\n            <button type="button" id="button-previous" ><div class="inside-button-previous"></div></button>\n            <div class="carousel-pictures">\n                <img src="${e[0]}" alt="Foto Inmueble" class="State-carousel-image" id="image-1" style="display: inline;">\n                ${n}\n            </div>\n            <button type="button" id="button-next" ><div class="inside-button-next"></div></button>\n        </div>\n    `})(a)}\n            <div class="State-page-info" id="State-page-info-1">\n                <p>\n                    ${g}\n                    ${y}\n                    para ${u}\n                </p>\n                <p>\n                    ${h}, ${f}<br>\n                </p>\n                <p>\n                    ${p.toLocaleString()} €<br>\n                    ${b.toLocaleString()} m²\n                </p>\n                <p>\n                    ${d} Habitaciones y ${m} Baños\n                </p>\n                <p>Referencia: ${i}</p>\n            </div>\n            <div class="State-page-info" id="State-page-info-3">\n                <p><b>Descripción:</b></p>\n                <p>${o}</p>\n            </div>\n            <div id="info2-contact">\n                <div class="State-page-info" id="State-page-info-2">\n                    <p><b>Características:</b></p>\n                    <p>${$}</p>\n                </div>\n                ${await c()}\n            </div>\n            ${await(async()=>`\n        <div id="map">\n            ${(await t(r()[2])).mapa_url}\n        </div>\n    `)()}\n        </div>\n    `},m=async()=>{const e=await l();return`\n        <div class=Info-page>\n            <div alt="Foto de portada" class="Info-portrait" style="background-image: url(${e.url_imagen_fondo})"></div>\n            <h2 class="Info-title">${e.titulo}</h2>\n            <div class="Info-content">${e.descripcion}</div>\n            <div class="Info-image-contact">\n                <img src="${e.url_imagen_principal}" alt="Una imagen característica" class="Info-image">\n                ${await c()}\n            </div>\n        </div>\n    `},u={"/":i,"/home":i,"/inmueble":d,"/inmueble/:id":d,"/about":m,"/administracion_fincas":m,"/gestion_alquileres":m,"/departamento_juridico":m,"/correduria_seguros":m,"/contact":m},p=async()=>{const e=document.getElementById("header"),n=document.getElementById("main"),t=document.getElementById("footer");e.innerHTML=await'\n        <div class="Header-logo">\n            <a href="#/home">\n                <img src="https://i.imgur.com/wSITcOb.png" alt="Valls Logo">\n            </a>\n        </div>\n        <div class="Header-nav-container">\n            <nav class="Header-nav">\n                <div type="button" id="Header-nav-button"></div>\n                <a class="Header-nav-item" href="#/home">\n                    <span>Inicio</span>\n                </a>\n                <a class="Header-nav-item" href="#/about">\n                    <span>Sobre Nosotros</span>\n                </a>\n                <a class="Header-nav-item" href="#/administracion_fincas">\n                    <span>Administración de Fincas</span>\n                </a>\n                <a class="Header-nav-item" href="#/gestion_alquileres">\n                    <span>Gestión de Alquileres</span>\n                </a>\n                <a class="Header-nav-item" href="#/departamento_juridico">\n                    <span>Dept. Jurídico</span>\n                </a>\n                <a class="Header-nav-item" href="#/correduria_seguros">\n                    <span>Seguros</span>\n                </a>\n            </nav>\n        <div>\n    ';let a=r(),i=await(e=>{let n=e[1];switch(n){case"":case void 0:return"/";default:return`/${n}`}})(a),o=u[i]?u[i]:s;n.innerHTML=await o(),t.innerHTML=await'\n    <figure class="Footer-logo">\n        <img src="https://i.imgur.com/amubWlx.png" alt="Valls Logo">\n    </figure>\n    <div class="Footer-info">\n        <div class="Footer-info-container">\n            <h4>ADMINISTRACIONES VALLS</h4>\n            <p class="Footer-info">\n                C/BISBE PERELLÓ 3 BAJOS <br>\n                PALMA DE MALLORCA <br>\n                TEL 971 72 16 88 / 971 72 16 89 <br>\n                EMAIL inmobiliaria@administracionesvalls.com <br>\n            </p>\n        </div>\n        <div class="Footer-info-container">\n            <h4>HORARIO</h4>\n            <p class="Footer-info">\n                Lunes a Viernes <br>\n                De 8 a 16 Hs <br>\n            </p>\n        </div>\n    </div>\n    '},b=()=>{if(document.getElementById("State-carousel")){const e=document.getElementsByClassName("State-carousel-image"),n=document.getElementById("button-previous"),t=document.getElementById("button-next"),a=n=>{e[n].style.display="inline"},i=n=>{e[n].style.display="none"},s=()=>{for(let n=0;n<e.length;n++)if("inline"===e[n].style.display)return n},o=()=>{let e=s();0!==e&&(i(e),a(e-1))},r=()=>{let n=s();n!==e.length-1&&(i(n),a(n+1))};n.addEventListener("click",o),t.addEventListener("click",r)}},g=async()=>{const e=await t(),n=document.getElementsByClassName("Filter-button"),a=document.getElementsByClassName("Filter-operation"),i=document.getElementsByClassName("Filter-button-operation"),s=document.getElementsByClassName("Filter-price"),o=document.getElementsByClassName("Filter-button-price"),r=document.getElementsByClassName("Filter-surface"),l=document.getElementsByClassName("Filter-button-surface"),c=document.getElementsByClassName("Filter-room"),d=document.getElementsByClassName("Filter-button-room"),m=document.getElementsByClassName("Filter-toilet"),u=document.getElementsByClassName("Filter-button-toilet"),p=document.getElementsByClassName("Filter-type"),b=document.getElementsByClassName("Filter-button-type"),g=document.getElementsByClassName("Filter-subtype"),y=document.getElementsByClassName("Filter-button-subtype"),h=document.getElementsByClassName("Filter-zone"),f=document.getElementsByClassName("Filter-button-zone"),v=(document.getElementsByClassName("Filter-characteristic"),document.getElementsByClassName("Filter-button-characteristic"),(e,n,t,a)=>{let i=!1;for(let e=0;e<a.length;e++)i+=a[e].checked;if(i){let e=!1;for(let i=0;i<a.length;i++)e+=a[i].checked&&t[i].textContent===n;if(e)return 1;if(!e)return 0}else if(!i)return 1}),$=async n=>{var t;8===v(e[n].id,e[n].operacion.tipo_operacion,a,i)+v(e[n].id,e[n].precio,s,o)+v(e[n].id,e[n].superficie,r,l)+v(e[n].id,e[n].habitaciones,c,d)+v(e[n].id,e[n].banos,m,u)+v(e[n].id,e[n].tipo_inmueble.nombre_tipo_inmueble,p,b)+v(e[n].id,e[n].subtipo_inmueble.nombre_subtipo_inmueble,g,y)+v(e[n].id,e[n].zona.nombre_zona,h,f)?(t=e[n].id,document.getElementById(`container-${t}`).style.display="flex"):(e=>{document.getElementById(`container-${e}`).style.display="none"})(e[n].id)},w=()=>{for(let n=0;n<e.length;n++)e[n].disponible&&$(n)};w();for(let e=0;e<n.length;e++)n[e].addEventListener("click",w)},y=async()=>{const e=document.getElementById("Home-items"),n=await t();if(e)for(let e=0;e<n.length;e++)n[e].disponible&&n[e].texto_1&&(document.getElementById(`container-${n[e].id}`).style.order=parseInt(`-${n[e].texto_1}`))},h=()=>{if(document.getElementById("show-filter-button")){const e=document.getElementById("show-filter-button"),n=document.getElementById("Home-filter-menu"),t=()=>{"flex"===n.style.display?n.style.display="none":n.style.display="flex"};e.addEventListener("click",t)}},f=document.getElementById("main");new MutationObserver((function(e,n){for(const n of e)"childList"===n.type?(b(),h(),g(),y()):n.type})).observe(f,{attributes:!0,childList:!0,subtree:!0});const v=()=>{const e=document.getElementById("Header-nav-button");let n=document.getElementsByClassName("Header-nav-item");e.addEventListener("click",(()=>{for(let e=0;e<n.length;e++)"inline"===n[e].style.display?n[e].style.display="none":n[e].style.display="inline"}))},$=document.getElementById("header");new MutationObserver((function(e,n){for(const n of e)"childList"===n.type?v():n.type})).observe($,{attributes:!0,childList:!0,subtree:!0}),window.addEventListener("load",p),window.addEventListener("hashchange",p)})();